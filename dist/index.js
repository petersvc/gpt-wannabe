import"dotenv/config";import{keepAlive}from"./server.js";import axios from"axios";import{Client,IntentsBitField}from"discord.js";const client=new Client({intents:[IntentsBitField.Flags.Guilds,IntentsBitField.Flags.GuildMessages,IntentsBitField.Flags.MessageContent]});client.on("ready",()=>{console.log("listening")}),client.on("messageCreate",async message=>{var urlFormatPrompt,baseUrl;message.author.bot||message.channel.id===process.env.CHANNEL_ID_TEST&&message.channel.id===process.env.CHANNEL_ID&&message.content.includes("!gpt")&&([{role:"system",content:"You are a sarcastic chatbot."}].push({role:"user",content:message.content}),await message.channel.sendTyping(),baseUrl=process.env.GPT_API_URL,urlFormatPrompt=message.content.replace("!gpt ","").replaceAll(" ","+"),baseUrl=(await axios.get(baseUrl+"?prompt="+urlFormatPrompt)).data["res"],message.reply(baseUrl))}),keepAlive(),client.login(process.env.TOKEN);